<form [formGroup]="registrationForm" class="register-container" (ngSubmit)="onSubmit()">
  <div class="nav">
    <span class="title">Regístrate</span>
    <span class="subtitle">Completa tus datos personales</span>
  </div>
  
  <div *ngIf="errorMessage" class="error-box error">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="error-box success">
    {{ successMessage }}
  </div>

  <div class="required-msg">
    <span class="required-icon">(*) </span>
    <span class="required-desc">Campo obligatorio</span>
  </div>

  <div class="grid-2">
    <div class="input-group">
      <label>Documento *</label>
      <select formControlName="document_type">
        <option *ngFor="let type of documentTypes" [ngValue]="type">{{ type }}</option>
      </select>
      <div *ngIf="showError('document_type')" class="validation-error">Documento requerido.</div>
    </div>

    <div class="input-group">
      <label>Nº de documento *</label>
      <input type="text" formControlName="document_number" />
      <div *ngIf="showError('document_number')" class="validation-error">Número de documento inválido (8-12 dígitos).</div>
    </div>
  </div>

  <div class="warning-box">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mi-icono-personalizado">
      <path d="M12 1.5C6.20156 1.5 1.5 6.20156 1.5 12C1.5 17.7984 6.20156 22.5 12 22.5C17.7984 22.5 22.5 17.7984 22.5 12C22.5 6.20156 17.7984 1.5 12 1.5ZM12 20.7188C7.18594 20.7188 3.28125 16.8141 3.28125 12C3.28125 7.18594 7.18594 3.28125 12 3.28125C16.8141 3.28125 20.7188 7.18594 20.7188 12C20.7188 16.8141 16.8141 20.7188 12 20.7188Z" fill="currentColor"></path>
      <path d="M10.875 7.875C10.875 8.17337 10.9935 8.45952 11.2045 8.6705C11.4155 8.88147 11.7016 9 12 9C12.2984 9 12.5845 8.88147 12.7955 8.6705C13.0065 8.45952 13.125 8.17337 13.125 7.875C13.125 7.57663 13.0065 7.29048 12.7955 7.0795C12.5845 6.86853 12.2984 6.75 12 6.75C11.7016 6.75 11.4155 6.86853 11.2045 7.0795C10.9935 7.29048 10.875 7.57663 10.875 7.875ZM12.5625 10.5H11.4375C11.3344 10.5 11.25 10.5844 11.25 10.6875V17.0625C11.25 17.1656 11.3344 17.25 11.4375 17.25H12.5625C12.6656 17.25 12.75 17.1656 12.75 17.0625V10.6875C12.75 10.5844 12.6656 10.5 12.5625 10.5Z" fill="currentColor"></path>
    </svg>
    <div>Ingresa tus <strong>nombres y apellidos</strong> exactamente como se muestran en tu documento.</div>
  </div>

  <div class="grid-2">
    <div class="input-group">
      <label>Nombres *</label>
      <input type="text" formControlName="names" />
      <div *ngIf="showError('names')" class="validation-error">Nombres son requeridos.</div>
    </div>

    <div class="input-group">
      <label>Apellidos *</label>
      <input type="text" formControlName="last_names" />
      <div *ngIf="showError('last_names')" class="validation-error">Apellidos son requeridos.</div>
    </div>
  </div>

  <div class="input-group">
    <label class="label">Fecha de nacimiento *</label>
    <div class="grid-3">
      <select formControlName="birthYear">
        <option [ngValue]="null" disabled>Año</option>
        <option *ngFor="let y of years" [ngValue]="y">{{ y }}</option>
      </select>
      <select formControlName="birthMonth">
        <option [ngValue]="null" disabled>Mes</option>
        <option *ngFor="let m of months" [ngValue]="m">{{ m }}</option>
      </select>
      <select formControlName="birthDay">
        <option [ngValue]="null" disabled>Día</option>
        <option *ngFor="let d of days" [ngValue]="d">{{ d }}</option>
      </select>
    </div>
    <div *ngIf="showError('birthYear') || showError('birthMonth') || showError('birthDay')" class="validation-error">Fecha de nacimiento requerida.</div>
  </div>

  <div class="input-group">
    <label class="label">Lugar de residencia</label> 
    <div class="grid-3">
      <select formControlName="residenceDepartment">
        <option [ngValue]="null" disabled>Departamento</option>
        <option *ngFor="let dep of departments" [ngValue]="dep.code">{{ dep.name }}</option>
      </select>
      
      <select formControlName="residenceProvince">
        <option [ngValue]="null" disabled>Provincia</option>
        <option *ngFor="let prov of provinces" [ngValue]="prov.code">{{ prov.name }}</option>
      </select>
      
      <select formControlName="residenceDistrict">
        <option [ngValue]="null" disabled>Distrito</option>
        <option *ngFor="let dist of districts" [ngValue]="dist.code">{{ dist.name }}</option>
      </select>
    </div>
  </div>

  <div class="grid-2">
    <div class="input-group">
      <label>Código</label>
      <div class="code-box">+51</div>
    </div>

    <div class="input-group">
      <label>Número de celular *</label>
      <input type="text" formControlName="phone_number" />
      <div *ngIf="showError('phone_number')" class="validation-error">Número de celular requerido.</div>
    </div>
  </div>

  <div class="input-group">
    <label>Género *</label>
    <select formControlName="gender">
      <option [ngValue]="null" disabled>Selecciona un género</option>
      <option *ngFor="let g of genders" [ngValue]="g">{{ g }}</option>
    </select>
    <div *ngIf="showError('gender')" class="validation-error">Género es requerido.</div>
  </div>

  <button type="submit" class="btn-submit" 
          [disabled]="registrationForm.invalid || isSubmitting">
    {{ isSubmitting ? 'PROCESANDO...' : 'CONTINUAR' }}
  </button>
  
  <div class="input-group" style="margin-top: 20px;">
    <label>Token de Seguridad * (Solo para pruebas)</label>
    <input type="text" formControlName="token" placeholder="Generando token..." />
    <div *ngIf="showError('token')" class="validation-error">Token requerido (8 dígitos).</div>
  </div>
</form>